@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --surface-0: 255 255 255;
    --surface-1: 250 250 250;
    --surface-2: 245 245 245;
    --surface-3: 238 238 238;
    --accent: 99 102 241;
    --accent-muted: 99 102 241;
    --border: 229 229 229;
    --border-strong: 212 212 212;
    --foreground: 23 23 23;
    --background: 250 250 250;
    --card: 255 255 255;
    --card-foreground: 23 23 23;
  }

  .dark {
    --surface-0: 10 10 10;
    --surface-1: 18 18 18;
    --surface-2: 24 24 24;
    --surface-3: 32 32 32;
    --accent: 129 140 248;
    --accent-muted: 67 56 202;
    --border: 38 38 38;
    --border-strong: 64 64 64;
    --foreground: 250 250 250;
    --background: 10 10 10;
    --card: 18 18 18;
    --card-foreground: 250 250 250;
  }

  * {
    @apply border-border;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-surface-0 text-neutral-900 font-sans;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  .dark body {
    @apply bg-surface-0 text-neutral-50;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-neutral-300 dark:bg-neutral-700;
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-neutral-400 dark:bg-neutral-600;
  }

  /* Selection */
  ::selection {
    @apply bg-accent/20 text-inherit;
  }
}

@layer components {
  /* Monospace label used for status indicators and chrome */
  .label-mono {
    @apply font-mono text-2xs font-medium uppercase tracking-widest;
  }

  /* Markdown body typography for chat messages */
  .markdown-body {
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  .markdown-body > *:first-child {
    margin-top: 0;
  }

  .markdown-body > *:last-child {
    margin-bottom: 0;
  }

  .markdown-body h1,
  .markdown-body h2,
  .markdown-body h3,
  .markdown-body h4,
  .markdown-body h5,
  .markdown-body h6 {
    @apply mt-4 mb-2 font-semibold text-neutral-900 dark:text-neutral-100;
  }

  .markdown-body h1 { @apply text-lg; }
  .markdown-body h2 { @apply text-base; }
  .markdown-body h3 { @apply text-sm font-semibold; }
  .markdown-body h4,
  .markdown-body h5,
  .markdown-body h6 { @apply text-[13px] font-semibold; }

  .markdown-body p {
    @apply my-2 text-pretty;
  }

  .markdown-body ul,
  .markdown-body ol {
    @apply my-2 pl-6;
  }

  .markdown-body ul { @apply list-disc; }
  .markdown-body ol { @apply list-decimal; }

  .markdown-body li {
    @apply my-0.5;
  }

  .markdown-body li > ul,
  .markdown-body li > ol {
    @apply my-0;
  }

  .markdown-body blockquote {
    @apply my-2 border-l-2 border-neutral-300 pl-3 text-neutral-500 dark:border-neutral-600 dark:text-neutral-400;
  }

  .markdown-body hr {
    @apply my-4 border-neutral-200 dark:border-neutral-700;
  }

  .markdown-body table {
    @apply my-2 w-full border-collapse text-[12px];
  }

  .markdown-body th,
  .markdown-body td {
    @apply border border-neutral-200 px-2 py-1 text-left dark:border-neutral-700;
  }

  .markdown-body th {
    @apply bg-neutral-50 font-medium dark:bg-neutral-800;
  }

  .markdown-body input[type='checkbox'] {
    @apply mr-1.5 align-middle;
  }

  .markdown-body strong {
    @apply font-semibold text-neutral-900 dark:text-neutral-100;
  }

  .markdown-body del {
    @apply text-neutral-400 dark:text-neutral-500;
  }

  /* Shiki dual-theme support */
  .shiki-wrapper .shiki,
  .shiki-wrapper .shiki span {
    color: var(--shiki-light) !important;
    background-color: transparent !important;
  }

  .dark .shiki-wrapper .shiki,
  .dark .shiki-wrapper .shiki span {
    color: var(--shiki-dark) !important;
    background-color: transparent !important;
  }

  /* Mobile session-info sheet readability/tap sizing */
  @media (max-width: 768px) {
    .session-metadata-mobile .metadata-sidebar .metadata-scroll {
      padding: 0.875rem 0.875rem 1.125rem;
      gap: 0.875rem;
    }

    .session-metadata-mobile .metadata-sidebar .metadata-section-label {
      font-size: 0.6875rem;
      letter-spacing: 0.12em;
      margin-bottom: 0.375rem;
    }

    .session-metadata-mobile .metadata-sidebar .font-mono {
      font-size: 0.775rem;
      line-height: 1.4;
    }

    .session-metadata-mobile .metadata-sidebar a,
    .session-metadata-mobile .metadata-sidebar button {
      min-height: 1.75rem;
    }
  }
}
